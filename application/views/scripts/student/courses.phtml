<div ng-controller='StudentCoursesController' style='min-height: 95%'>

    <div class="row main-row" ng-controller='MessageCtrl' style='width: auto; min-width: 1024px; max-width: 90%'>
        <div class="col-sm-12">
            <div style='display: none' class="alert alert-success" role="alert"><b>New!</b> You can now use Messages to communicate with advisors and submit clarifications.</div>
            
            <div class="panel panel-default">
                <table id='student-courses-table' class='table table-hover table-striped'>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Course name</th>
                            <th>Units</th>
                            <th>Description</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Advisor comment</th>
                            <th>Messages</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="course in courses">
                            <th scope="row">{{ $index + 1 }}
                            <td>{{ generateCourseNameNumberText(course) }}</td>
                            <td>{{ course.taking_as == 'place-out' ? '-' : course.units }}</td>
                            
                            <td><a href='javascript: ;'>View</a></td>
                            <td>{{ ucfirst(course.taking_as) }}</td>
                            
                            <td>{{ course.taking_as == 'place-out' ? '-' : generateDateText(course.submission_time) }}</td>
                            
                            <td>
                                <span ng-show="course.status == 'taking'">In progress</span>
                                <span ng-show="course.status == 'taken'" class='text-success'>Taken</span>
                                <span ng-show="course.status == 'submitted'" class='text-info'>Submitted, under review</span>
                                <span ng-show="course.status == 'rejected'" class='text-danger'>Rejected</span>
                                <span ng-show="course.status == 'approved'" class='text-success'>Approved</span>
                                <span ng-show="course.status == 'need-clarification'" class='text-warning'>Clarification needed</span>
                                <span ng-show="course.status == 'satisfied'" class='text-success'>Satisfied</span>
                                <span ng-show="course.status == 'not-satisfied'" class='text-danger'>Not satisfied</span>
                            </td>
                            
                            <td>{{ course.taking_as == 'place-out' ? '-' : course.comment }}</td>
                            <td><a class='view-msg {{ course.has_unread_msg ? "text-danger" : "" }}'
                                ng-click='showMessages(course.id)'
                                href='javascript: ;'>
                                {{ course.has_unread_msg ? "Unread messages" : "View" }}
                            </a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <?php require_once(APPLICATION_PATH . "/../application/views/scripts/commons/messages.phtml"); ?>

</div>